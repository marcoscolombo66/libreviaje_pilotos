"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9592],{7574:(V,W,p)=>{p.d(W,{o:()=>j});var A=p(2096),m=p(849),D=p(5649);let j=(()=>{class w{constructor(_,O){this.storage=_,this.navCtrl=O}verificar(){this.storage.get("datos_pasajero").then(_=>{if(!_)return console.log("Login","Inactivo"),this.navCtrl.navigateRoot("/login")})}getUser(){return new Promise((_,O)=>{this.storage.get("datos_pasajero").then(h=>{_(h)},h=>{O(h.json()),console.log("error",h.json)})})}}return w.\u0275fac=function(_){return new(_||w)(A.LFG(m.K),A.LFG(D.SH))},w.\u0275prov=A.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})()},9592:(V,W,p)=>{p.d(W,{W:()=>re});var A=p(655),m=p(5861);"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global&&global;var h=(()=>{return(o=h||(h={})).Unimplemented="UNIMPLEMENTED",o.Unavailable="UNAVAILABLE",h;var o})();class G extends Error{constructor(t,i){super(t),this.message=t,this.code=i}}const Q=o=>{var t,i,r,s,n;const g=o.CapacitorCustomPlatform||null,a=o.Capacitor||{},L=a.Plugins=a.Plugins||{},u=o.CapacitorPlatforms,x=(null===(t=null==u?void 0:u.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==g?g.name:(o=>{var t,i;return(null==o?void 0:o.androidBridge)?"android":(null===(i=null===(t=null==o?void 0:o.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===i?void 0:i.bridge)?"ios":"web"})(o)),oe=(null===(i=null==u?void 0:u.currentPlatform)||void 0===i?void 0:i.isNativePlatform)||(()=>"web"!==x()),ae=(null===(r=null==u?void 0:u.currentPlatform)||void 0===r?void 0:r.isPluginAvailable)||(d=>{const c=B.get(d);return!(!(null==c?void 0:c.platforms.has(x()))&&!J(d))}),J=(null===(s=null==u?void 0:u.currentPlatform)||void 0===s?void 0:s.getPluginHeader)||(d=>{var c;return null===(c=a.PluginHeaders)||void 0===c?void 0:c.find(E=>E.name===d)}),B=new Map,fe=(null===(n=null==u?void 0:u.currentPlatform)||void 0===n?void 0:n.registerPlugin)||((d,c={})=>{const E=B.get(d);if(E)return console.warn(`Capacitor plugin "${d}" already registered. Cannot register plugins twice.`),E.proxy;const Z=x(),I=J(d);let y;const ge=function(){var f=(0,m.Z)(function*(){return!y&&Z in c?y=y="function"==typeof c[Z]?yield c[Z]():c[Z]:null!==g&&!y&&"web"in c&&(y=y="function"==typeof c.web?yield c.web():c.web),y});return function(){return f.apply(this,arguments)}}(),F=f=>{let v;const P=(...C)=>{const U=ge().then(b=>{const S=((f,v)=>{var P,C;if(!I){if(f)return null===(C=f[v])||void 0===C?void 0:C.bind(f);throw new G(`"${d}" plugin is not implemented on ${Z}`,h.Unimplemented)}{const U=null==I?void 0:I.methods.find(b=>v===b.name);if(U)return"promise"===U.rtype?b=>a.nativePromise(d,v.toString(),b):(b,S)=>a.nativeCallback(d,v.toString(),b,S);if(f)return null===(P=f[v])||void 0===P?void 0:P.bind(f)}})(b,f);if(S){const M=S(...C);return v=null==M?void 0:M.remove,M}throw new G(`"${d}.${f}()" is not implemented on ${Z}`,h.Unimplemented)});return"addListener"===f&&(U.remove=(0,m.Z)(function*(){return v()})),U};return P.toString=()=>`${f.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:f,writable:!1,configurable:!1}),P},N=F("addListener"),k=F("removeListener"),me=(f,v)=>{const P=N({eventName:f},v),C=function(){var b=(0,m.Z)(function*(){const S=yield P;k({eventName:f,callbackId:S},v)});return function(){return b.apply(this,arguments)}}(),U=new Promise(b=>P.then(()=>b({remove:C})));return U.remove=(0,m.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield C()}),U},$=new Proxy({},{get(f,v){switch(v){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return I?me:N;case"removeListener":return k;default:return F(v)}}});return L[d]=$,B.set(d,{name:d,proxy:$,platforms:new Set([...Object.keys(c),...I?[Z]:[]])}),$});return a.convertFileSrc||(a.convertFileSrc=d=>d),a.getPlatform=x,a.handleError=d=>o.console.error(d),a.isNativePlatform=oe,a.isPluginAvailable=ae,a.pluginMethodNoop=(d,c,E)=>Promise.reject(`${E} does not have an implementation of "${c}".`),a.registerPlugin=fe,a.Exception=G,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},R=(o=>o.Capacitor=Q(o))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),X=R.registerPlugin;class ee extends class z{constructor(t){this.listeners={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,i){var r=this;this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(i);const n=this.windowListeners[t];n&&!n.registered&&this.addWindowListener(n);const g=function(){var L=(0,m.Z)(function*(){return r.removeListener(t,i)});return function(){return L.apply(this,arguments)}}(),a=Promise.resolve({remove:g});return Object.defineProperty(a,"remove",{value:(L=(0,m.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield g()}),function(){return L.apply(this,arguments)})}),a;var L}removeAllListeners(){var t=this;return(0,m.Z)(function*(){t.listeners={};for(const i in t.windowListeners)t.removeWindowListener(t.windowListeners[i]);t.windowListeners={}})()}notifyListeners(t,i){const r=this.listeners[t];r&&r.forEach(s=>s(i))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,i){this.windowListeners[i]={registered:!1,windowEventName:t,pluginEventName:i,handler:r=>{this.notifyListeners(i,r)}}}unimplemented(t="not implemented"){return new R.Exception(t,h.Unimplemented)}unavailable(t="not available"){return new R.Exception(t,h.Unavailable)}removeListener(t,i){var r=this;return(0,m.Z)(function*(){const s=r.listeners[t];if(!s)return;const n=s.indexOf(i);r.listeners[t].splice(n,1),r.listeners[t].length||r.removeWindowListener(r.windowListeners[t])})()}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){!t||(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}}{write(t){var i=this;return(0,m.Z)(function*(){if("undefined"==typeof navigator||!navigator.clipboard)throw i.unavailable("Clipboard API not available in this browser");if(void 0!==t.string)yield i.writeText(t.string);else if(t.url)yield i.writeText(t.url);else{if(!t.image)throw new Error("Nothing to write");if("undefined"==typeof ClipboardItem)throw i.unavailable("Writing images to the clipboard is not supported in this browser");try{const r=yield(yield fetch(t.image)).blob(),s=new ClipboardItem({[r.type]:r});yield navigator.clipboard.write([s])}catch(r){throw new Error("Failed to write image")}}})()}read(){var t=this;return(0,m.Z)(function*(){if("undefined"==typeof navigator||!navigator.clipboard)throw t.unavailable("Clipboard API not available in this browser");if("undefined"==typeof ClipboardItem)return t.readText();try{const i=yield navigator.clipboard.read(),r=i[0].types[0],s=yield i[0].getType(r);return{value:yield t._getBlobData(s,r),type:r}}catch(i){return t.readText()}})()}readText(){var t=this;return(0,m.Z)(function*(){if("undefined"==typeof navigator||!navigator.clipboard||!navigator.clipboard.readText)throw t.unavailable("Reading from clipboard not supported in this browser");return{value:yield navigator.clipboard.readText(),type:"text/plain"}})()}writeText(t){var i=this;return(0,m.Z)(function*(){if("undefined"==typeof navigator||!navigator.clipboard||!navigator.clipboard.writeText)throw i.unavailable("Writting to clipboard not supported in this browser");yield navigator.clipboard.writeText(t)})()}_getBlobData(t,i){return new Promise((r,s)=>{const n=new FileReader;i.includes("image")?n.readAsDataURL(t):n.readAsText(t),n.onloadend=()=>{r(n.result)},n.onerror=g=>{s(g)}})}}const te=X("Clipboard",{web:()=>new ee});var Y=p(520),T=p(4182),e=p(2096),l=p(5649),ie=p(7574);let re=(()=>{class o{constructor(i,r,s,n,g,a,L,u,q){this.navParams=i,this.http=r,this.actionSheetCtrl=s,this.alertController=n,this.modalCtrl=g,this.toast=a,this.formBuilder=L,this.inicia=u,this.navCtrl=q,this.destino=this.navParams.get("mySubject"),this.total=this.navParams.get("mySubject2"),this.fotodestino=this.navParams.get("mySubject3"),this.cantidadAsientosq=this.navParams.get("mySubject4"),this.idpilotosdestinos=this.navParams.get("mySubject5"),this.totalfinal=this.total,this.myForm=this.formBuilder.group({asientos:["1",T.kI.required],totales:[""]})}presentAlert(i,r,s){return(0,A.mG)(this,void 0,void 0,function*(){const n=yield this.alertController.create({cssClass:"my-custom-class",header:i,subHeader:r,message:s,buttons:["Aceptar"]});yield n.present(),yield n.onDidDismiss()})}ngOnInit(){}canDismiss(){this.modalCtrl.dismiss()}totales(i){this.totalfinal=this.total*i.target.value}pagar(){return(0,A.mG)(this,void 0,void 0,function*(){if(this.idUSUARIO=yield this.inicia.getUser(),this.usuarioEMAIL=this.idUSUARIO[0].USUARIO,this.idUSUARIO=this.idUSUARIO[0].idUSUARIO,!this.myForm.valid)return this.presentAlert(" \xa1Atenci\xf3n! ","Ha ocurrido un error.","Ingrese los valores requeridos."),!1;{const i=new Y.WM({"Content-Type":"application/octet-stream"});console.log("ok",this.myForm.value);const r={ASIENTOS:this.myForm.value.asientos,TOTAL:this.totalfinal,CBU:"0000003100057180563535",DESTINO:this.navParams.get("mySubject"),idUSUARIO:this.idUSUARIO,idPILOTOS_DESTINOS:this.idpilotosdestinos,usuarioEMAIL:this.usuarioEMAIL};this.http.post("https://www.libreviaje.com/admin/index.php/Api4/addReserva/",JSON.stringify(r),i).subscribe(n=>{this.respuesta=n},n=>{this.presentAlert(" \xa1Atenci\xf3n! ","Ha ocurrido un error.","Vuelva a intentarlo"),console.log(n)}),this.presentAlert(" Reserva ","Se reserv\xf3 correctamente.","Una vez efectuado el pago del viaje, podr\xe1s subir el comprobante mediante la app.<br/><br/>Gracias!"),this.http.post("https://www.libreviaje.com/admin/index.php/Api4/updatePilotosDestinos/",JSON.stringify({idPILOTOS_DESTINOS:this.idpilotosdestinos,ASIENTOS:this.myForm.value.asientos}),i).subscribe(n=>{this.respuesta2=n},n=>{this.presentAlert(" \xa1Atenci\xf3n! ","Ha ocurrido un error.","Vuelva a intentarlo"),console.log(n)}),this.modalCtrl.dismiss(),this.navCtrl.navigateRoot("/tab3"),window.open("https://www.mercadopago.com.ar/withdraw#from-section=home","_system","location=yes")}})}presentToast(i){return(0,A.mG)(this,void 0,void 0,function*(){(yield this.toast.create({message:i,duration:2e3})).present()})}copiarCbu(){return(0,A.mG)(this,void 0,void 0,function*(){te.write({string:"0000003100057180563535"}),this.presentToast("CBU copiado en portapapeles")})}}return o.\u0275fac=function(i){return new(i||o)(e.Y36(l.X1),e.Y36(Y.eN),e.Y36(l.BX),e.Y36(l.Br),e.Y36(l.IN),e.Y36(l.yF),e.Y36(T.qu),e.Y36(ie.o),e.Y36(l.SH))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-reservar"]],decls:61,vars:6,consts:[[1,"etiqueta"],["slot","end"],[3,"click"],["novalidate","",3,"formGroup","ngSubmit"],[2,"text-align","center"],["type","number","formControlName","asientos","min","1","required","",2,"max-width","100px",3,"max","ngModel","value","change","ngModelChange"],["size","small",1,"etiqueta",3,"click"],["shape","round","expand","block","fill","outline","type","submit",1,"botones"]],template:function(i,r){1&i&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),e._uU(3,"RESERVAR"),e.qZA(),e.TgZ(4,"ion-buttons",1)(5,"ion-button",2),e.NdJ("click",function(){return r.canDismiss()}),e._uU(6,"\xa0X\xa0"),e.qZA()()()(),e.TgZ(7,"ion-content")(8,"form",3),e.NdJ("ngSubmit",function(){return r.pagar()}),e.TgZ(9,"ion-card")(10,"ion-card-header",0),e._UZ(11,"ion-card-title",4),e.TgZ(12,"ion-card-title"),e._uU(13,"Pasos a seguir"),e.qZA(),e.TgZ(14,"ion-card-subtitle"),e._uU(15,"1) Elija la cantidad de asientos"),e.qZA(),e.TgZ(16,"ion-card-subtitle"),e._uU(17,"2) Copie el CBU."),e.qZA(),e.TgZ(18,"ion-card-subtitle"),e._uU(19,"3) Presione pagar"),e.qZA(),e.TgZ(20,"ion-card-subtitle"),e._uU(21,"4) Efectue la transferencia"),e.qZA(),e.TgZ(22,"ion-card-subtitle"),e._uU(23,"5) Envie comprobante"),e.qZA()(),e.TgZ(24,"ion-card-content")(25,"ion-grid")(26,"ion-row")(27,"ion-col")(28,"ion-item")(29,"ion-label")(30,"strong",0),e._uU(31,"Destino"),e.qZA()(),e.TgZ(32,"span",0),e._uU(33),e.qZA()()()(),e.TgZ(34,"ion-row")(35,"ion-col")(36,"ion-item")(37,"ion-label")(38,"strong",0),e._uU(39,"Cantidad asientos"),e.qZA()(),e.TgZ(40,"ion-input",5),e.NdJ("change",function(n){return r.totales(n)})("ngModelChange",function(n){return r.myForm.value.asientos=n}),e.qZA()()(),e.TgZ(41,"ion-col")(42,"ion-item")(43,"ion-label")(44,"strong",0),e._uU(45,"TOTAL:"),e.qZA()(),e.TgZ(46,"span",0),e._uU(47),e.qZA()()()(),e.TgZ(48,"ion-row")(49,"ion-col")(50,"ion-item")(51,"ion-label")(52,"strong",0),e._uU(53,"CBU: \xa0\xa0\xa0"),e.qZA(),e.TgZ(54,"span",0),e._uU(55,"0000003100057180563535"),e.qZA()(),e._uU(56," \xa0\xa0\xa0"),e.TgZ(57,"ion-button",6),e.NdJ("click",function(){return r.copiarCbu()}),e._uU(58,"copiar"),e.qZA()()()()(),e.TgZ(59,"ion-button",7),e._uU(60," PAGAR"),e.qZA()()()()()),2&i&&(e.xp6(8),e.Q6J("formGroup",r.myForm),e.xp6(25),e.Oqu(r.destino),e.xp6(7),e.s9C("max",r.cantidadAsientosq),e.Q6J("ngModel",r.myForm.value.asientos)("value",1),e.xp6(7),e.hij("$ ",r.totalfinal,""))},directives:[l.Gu,l.sr,l.wd,l.Sm,l.YG,l.W2,T._Y,T.JL,T.sg,l.PM,l.Zi,l.Dq,l.tO,l.FN,l.jY,l.Nd,l.wI,l.Ie,l.Q$,l.pK,l.as,T.JJ,T.u,T.Q7],styles:[""]}),o})()}}]);