"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9592],{7574:(z,x,f)=>{f.d(x,{o:()=>M});var y=f(2096),m=f(849),q=f(5649),F=f(520);let M=(()=>{class C{constructor(A,h,P){this.storage=A,this.navCtrl=h,this.httpClient=P}verificar(){this.storage.get("datos_pasajero").then(A=>{if(!A)return console.log("Login","Inactivo"),this.navCtrl.navigateRoot("/login")})}getUser(){return new Promise((A,h)=>{this.storage.get("datos_pasajero").then(P=>{A(P)},P=>{h(P.json()),console.log("error",P.json)})})}getDolarBlue(){return this.httpClient.get("https://api.bluelytics.com.ar/v2/latest")}}return C.\u0275fac=function(A){return new(A||C)(y.LFG(m.K),y.LFG(q.SH),y.LFG(F.eN))},C.\u0275prov=y.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},9592:(z,x,f)=>{f.d(x,{W:()=>ne});var y=f(655),m=f(5861);"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global&&global;var h=(()=>{return(o=h||(h={})).Unimplemented="UNIMPLEMENTED",o.Unavailable="UNAVAILABLE",h;var o})();class P extends Error{constructor(t,i){super(t),this.message=t,this.code=i}}const K=o=>{var t,i,r,a,n;const v=o.CapacitorCustomPlatform||null,s=o.Capacitor||{},L=s.Plugins=s.Plugins||{},u=o.CapacitorPlatforms,I=(null===(t=null==u?void 0:u.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==v?v.name:(o=>{var t,i;return(null==o?void 0:o.androidBridge)?"android":(null===(i=null===(t=null==o?void 0:o.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===i?void 0:i.bridge)?"ios":"web"})(o)),ae=(null===(i=null==u?void 0:u.currentPlatform)||void 0===i?void 0:i.isNativePlatform)||(()=>"web"!==I()),le=(null===(r=null==u?void 0:u.currentPlatform)||void 0===r?void 0:r.isPluginAvailable)||(d=>{const c=G.get(d);return!(!(null==c?void 0:c.platforms.has(I()))&&!Y(d))}),Y=(null===(a=null==u?void 0:u.currentPlatform)||void 0===a?void 0:a.getPluginHeader)||(d=>{var c;return null===(c=s.PluginHeaders)||void 0===c?void 0:c.find(O=>O.name===d)}),G=new Map,fe=(null===(n=null==u?void 0:u.currentPlatform)||void 0===n?void 0:n.registerPlugin)||((d,c={})=>{const O=G.get(d);if(O)return console.warn(`Capacitor plugin "${d}" already registered. Cannot register plugins twice.`),O.proxy;const S=I(),R=Y(d);let _;const ve=function(){var g=(0,m.Z)(function*(){return!_&&S in c?_=_="function"==typeof c[S]?yield c[S]():c[S]:null!==v&&!_&&"web"in c&&(_=_="function"==typeof c.web?yield c.web():c.web),_});return function(){return g.apply(this,arguments)}}(),B=g=>{let p;const w=(...T)=>{const Z=ve().then(b=>{const E=((g,p)=>{var w,T;if(!R){if(g)return null===(T=g[p])||void 0===T?void 0:T.bind(g);throw new P(`"${d}" plugin is not implemented on ${S}`,h.Unimplemented)}{const Z=null==R?void 0:R.methods.find(b=>p===b.name);if(Z)return"promise"===Z.rtype?b=>s.nativePromise(d,p.toString(),b):(b,E)=>s.nativeCallback(d,p.toString(),b,E);if(g)return null===(w=g[p])||void 0===w?void 0:w.bind(g)}})(b,g);if(E){const W=E(...T);return p=null==W?void 0:W.remove,W}throw new P(`"${d}.${g}()" is not implemented on ${S}`,h.Unimplemented)});return"addListener"===g&&(Z.remove=(0,m.Z)(function*(){return p()})),Z};return w.toString=()=>`${g.toString()}() { [capacitor code] }`,Object.defineProperty(w,"name",{value:g,writable:!1,configurable:!1}),w},J=B("addListener"),k=B("removeListener"),me=(g,p)=>{const w=J({eventName:g},p),T=function(){var b=(0,m.Z)(function*(){const E=yield w;k({eventName:g,callbackId:E},p)});return function(){return b.apply(this,arguments)}}(),Z=new Promise(b=>w.then(()=>b({remove:T})));return Z.remove=(0,m.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield T()}),Z},j=new Proxy({},{get(g,p){switch(p){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return R?me:J;case"removeListener":return k;default:return B(p)}}});return L[d]=j,G.set(d,{name:d,proxy:j,platforms:new Set([...Object.keys(c),...R?[S]:[]])}),j});return s.convertFileSrc||(s.convertFileSrc=d=>d),s.getPlatform=I,s.handleError=d=>o.console.error(d),s.isNativePlatform=ae,s.isPluginAvailable=le,s.pluginMethodNoop=(d,c,O)=>Promise.reject(`${O} does not have an implementation of "${c}".`),s.registerPlugin=fe,s.Exception=P,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s.platform=s.getPlatform(),s.isNative=s.isNativePlatform(),s},D=(o=>o.Capacitor=K(o))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),X=D.registerPlugin;class ee extends class Q{constructor(t){this.listeners={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,i){var r=this;this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(i);const n=this.windowListeners[t];n&&!n.registered&&this.addWindowListener(n);const v=function(){var L=(0,m.Z)(function*(){return r.removeListener(t,i)});return function(){return L.apply(this,arguments)}}(),s=Promise.resolve({remove:v});return Object.defineProperty(s,"remove",{value:(L=(0,m.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield v()}),function(){return L.apply(this,arguments)})}),s;var L}removeAllListeners(){var t=this;return(0,m.Z)(function*(){t.listeners={};for(const i in t.windowListeners)t.removeWindowListener(t.windowListeners[i]);t.windowListeners={}})()}notifyListeners(t,i){const r=this.listeners[t];r&&r.forEach(a=>a(i))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,i){this.windowListeners[i]={registered:!1,windowEventName:t,pluginEventName:i,handler:r=>{this.notifyListeners(i,r)}}}unimplemented(t="not implemented"){return new D.Exception(t,h.Unimplemented)}unavailable(t="not available"){return new D.Exception(t,h.Unavailable)}removeListener(t,i){var r=this;return(0,m.Z)(function*(){const a=r.listeners[t];if(!a)return;const n=a.indexOf(i);r.listeners[t].splice(n,1),r.listeners[t].length||r.removeWindowListener(r.windowListeners[t])})()}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){!t||(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}}{write(t){var i=this;return(0,m.Z)(function*(){if("undefined"==typeof navigator||!navigator.clipboard)throw i.unavailable("Clipboard API not available in this browser");if(void 0!==t.string)yield i.writeText(t.string);else if(t.url)yield i.writeText(t.url);else{if(!t.image)throw new Error("Nothing to write");if("undefined"==typeof ClipboardItem)throw i.unavailable("Writing images to the clipboard is not supported in this browser");try{const r=yield(yield fetch(t.image)).blob(),a=new ClipboardItem({[r.type]:r});yield navigator.clipboard.write([a])}catch(r){throw new Error("Failed to write image")}}})()}read(){var t=this;return(0,m.Z)(function*(){if("undefined"==typeof navigator||!navigator.clipboard)throw t.unavailable("Clipboard API not available in this browser");if("undefined"==typeof ClipboardItem)return t.readText();try{const i=yield navigator.clipboard.read(),r=i[0].types[0],a=yield i[0].getType(r);return{value:yield t._getBlobData(a,r),type:r}}catch(i){return t.readText()}})()}readText(){var t=this;return(0,m.Z)(function*(){if("undefined"==typeof navigator||!navigator.clipboard||!navigator.clipboard.readText)throw t.unavailable("Reading from clipboard not supported in this browser");return{value:yield navigator.clipboard.readText(),type:"text/plain"}})()}writeText(t){var i=this;return(0,m.Z)(function*(){if("undefined"==typeof navigator||!navigator.clipboard||!navigator.clipboard.writeText)throw i.unavailable("Writting to clipboard not supported in this browser");yield navigator.clipboard.writeText(t)})()}_getBlobData(t,i){return new Promise((r,a)=>{const n=new FileReader;i.includes("image")?n.readAsDataURL(t):n.readAsText(t),n.onloadend=()=>{r(n.result)},n.onerror=v=>{a(v)}})}}const te=X("Clipboard",{web:()=>new ee});var $=f(520),U=f(4182),e=f(2096),l=f(5649),ie=f(7574),re=f(9808);let ne=(()=>{class o{constructor(i,r,a,n,v,s,L,u,H){this.navParams=i,this.http=r,this.actionSheetCtrl=a,this.alertController=n,this.modalCtrl=v,this.toast=s,this.formBuilder=L,this.inicia=u,this.navCtrl=H,this.destino=this.navParams.get("mySubject"),this.total=this.navParams.get("mySubject2"),this.fotodestino=this.navParams.get("mySubject3"),this.cantidadAsientosq=this.navParams.get("mySubject4"),this.idpilotosdestinos=this.navParams.get("mySubject5"),this.diaHora=this.navParams.get("mySubject6"),this.salida=this.navParams.get("mySubject7"),this.totalfinal=this.total,this.totalfinalReserva=1.23*this.total-this.total,this.inicia.getDolarBlue().subscribe(I=>{this.dolar=I.blue.value_buy}),this.myForm=this.formBuilder.group({asientos:["1",U.kI.required],totales:[""]})}presentAlert(i,r,a){return(0,y.mG)(this,void 0,void 0,function*(){const n=yield this.alertController.create({cssClass:"my-custom-class",header:i,subHeader:r,message:a,buttons:["Aceptar"]});yield n.present(),yield n.onDidDismiss()})}canDismiss(){this.modalCtrl.dismiss()}totales(i){this.totalfinal=this.total*i.target.value,this.totalfinalReserva=this.total*i.target.value*1.23-this.total*i.target.value}pagar(){return(0,y.mG)(this,void 0,void 0,function*(){if(this.idUSUARIO=yield this.inicia.getUser(),this.usuarioEMAIL=this.idUSUARIO[0].USUARIO,this.idUSUARIO=this.idUSUARIO[0].idUSUARIO,!this.myForm.valid)return this.presentAlert(" \xa1Atenci\xf3n! ","Ha ocurrido un error.","Ingrese los valores requeridos."),!1;{const i=new $.WM({"Content-Type":"application/octet-stream"});console.log("ok",this.myForm.value);const r={ASIENTOS:this.myForm.value.asientos,TOTAL:this.totalfinal,CBU:"0000003100057180563535",DESTINO:this.navParams.get("mySubject"),idUSUARIO:this.idUSUARIO,idPILOTOS_DESTINOS:this.idpilotosdestinos,usuarioEMAIL:this.usuarioEMAIL};this.http.post("https://www.libreviaje.com/admin/index.php/Api4/addReserva/",JSON.stringify(r),i).subscribe(n=>{this.respuesta=n},n=>{this.presentAlert(" \xa1Atenci\xf3n! ","Ha ocurrido un error.","Vuelva a intentarlo"),console.log(n)}),this.presentAlert(" Reserva ","Se reserv\xf3 correctamente.","Una vez efectuado el pago del viaje, podr\xe1s subir el comprobante mediante la app.<br/><br/>Gracias!"),this.http.post("https://www.libreviaje.com/admin/index.php/Api4/updatePilotosDestinos/",JSON.stringify({idPILOTOS_DESTINOS:this.idpilotosdestinos,ASIENTOS:this.myForm.value.asientos}),i).subscribe(n=>{this.respuesta2=n},n=>{this.presentAlert(" \xa1Atenci\xf3n! ","Ha ocurrido un error.","Vuelva a intentarlo"),console.log(n)}),this.modalCtrl.dismiss(),this.navCtrl.navigateRoot("/tab3"),window.open("https://www.mercadopago.com.ar/withdraw#from-section=home","_system","location=yes")}})}presentToast(i){return(0,y.mG)(this,void 0,void 0,function*(){(yield this.toast.create({message:i,duration:2e3})).present()})}copiarCbu(){return(0,y.mG)(this,void 0,void 0,function*(){this.totalfinalResto=this.totalfinal,te.write({string:"0000003100057180563535"}),this.presentToast("CBU copiado en portapapeles<br/><br/>Deber\xe1s pagar $"+this.totalfinalReserva*this.dolar+" pesos Argentinos de reserva.<br/> El resto del pasaje ("+this.totalfinalResto+"USD) se paga una vez que se hace el embarque")})}ngOnInit(){}}return o.\u0275fac=function(i){return new(i||o)(e.Y36(l.X1),e.Y36($.eN),e.Y36(l.BX),e.Y36(l.Br),e.Y36(l.IN),e.Y36(l.yF),e.Y36(U.qu),e.Y36(ie.o),e.Y36(l.SH))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-reservar"]],decls:85,vars:24,consts:[[1,"etiqueta"],["slot","end"],[3,"click"],["novalidate","",3,"formGroup","ngSubmit"],["name","warning-outline",1,"atencion"],["name","locate"],["name","airplane-sharp"],["name","calendar-outline"],["size","7"],["type","number","formControlName","asientos","min","1","required","",3,"max","ngModel","value","change","ngModelChange"],["size","5"],["size","3"],["size","9"],[1,"botones",3,"click"],["shape","round","type","submit",1,"botones"]],template:function(i,r){1&i&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),e._uU(3,"RESERVAR"),e.qZA(),e.TgZ(4,"ion-buttons",1)(5,"ion-button",2),e.NdJ("click",function(){return r.canDismiss()}),e._uU(6,"\xa0X\xa0"),e.qZA()()()(),e.TgZ(7,"ion-content")(8,"form",3),e.NdJ("ngSubmit",function(){return r.pagar()}),e.TgZ(9,"ion-card")(10,"ion-card-header",0)(11,"ion-card-title"),e._uU(12,"Pasos a seguir"),e.qZA(),e.TgZ(13,"ion-card-subtitle"),e._UZ(14,"ion-icon",4),e._uU(15,"\xa0Solo tenes que pagar el monto de reserva que figura abajo de "),e.TgZ(16,"strong"),e._uU(17,"TOTAL."),e.qZA()(),e.TgZ(18,"ion-card-subtitle"),e._UZ(19,"ion-icon",4),e._uU(20,"\xa0El importe restante se paga fisicamente al momento de embarcar."),e.qZA(),e.TgZ(21,"ion-card-subtitle"),e._uU(22," 1) Elija cantidad de ASIENTOS"),e._UZ(23,"br"),e._uU(24," 2) Click en copiar (Guarda CBU 0000003100057180563535)."),e._UZ(25,"br"),e._uU(26," 3) Presione pagar y pegue el CBU"),e._UZ(27,"br"),e._uU(28," 4) Efectue la transferencia"),e._UZ(29,"br"),e._uU(30," 5) Envie comprobante"),e.qZA()(),e.TgZ(31,"ion-card-content")(32,"ion-grid")(33,"ion-row")(34,"ion-col"),e._UZ(35,"ion-icon",5),e._uU(36,"\xa0 "),e.TgZ(37,"strong",0),e._uU(38,"SALIDA:\xa0"),e.qZA(),e.TgZ(39,"span",0),e._uU(40),e.qZA()(),e.TgZ(41,"ion-col"),e._UZ(42,"ion-icon",6),e._uU(43,"\xa0 "),e.TgZ(44,"strong",0),e._uU(45,"DESTINO:\xa0"),e.qZA(),e.TgZ(46,"span",0),e._uU(47),e.qZA()()(),e.TgZ(48,"ion-row")(49,"ion-col"),e._UZ(50,"ion-icon",7),e._uU(51,"\xa0 "),e.TgZ(52,"strong",0),e._uU(53,"DIA / HORA:\xa0"),e.qZA(),e.TgZ(54,"span",0),e._uU(55),e.ALo(56,"date"),e.ALo(57,"date"),e.ALo(58,"date"),e.ALo(59,"date"),e.qZA()(),e.TgZ(60,"ion-col")(61,"strong",0),e._uU(62,"TOTAL:\xa0"),e.qZA(),e.TgZ(63,"span",0),e._uU(64),e.qZA()()(),e.TgZ(65,"ion-row")(66,"ion-col",8)(67,"span",0)(68,"strong"),e._uU(69,"CANT. ASIENTOS"),e.qZA(),e.TgZ(70,"ion-input",9),e.NdJ("change",function(n){return r.totales(n)})("ngModelChange",function(n){return r.myForm.value.asientos=n}),e.qZA()()(),e.TgZ(71,"ion-col",10)(72,"span",0)(73,"strong"),e._uU(74,"PAGAR RESERVA:"),e.qZA(),e._uU(75," \xa0"),e._UZ(76,"br"),e._uU(77),e.qZA()()(),e.TgZ(78,"ion-row"),e._UZ(79,"ion-col",11),e.TgZ(80,"ion-col",12)(81,"ion-button",13),e.NdJ("click",function(){return r.copiarCbu()}),e._uU(82," Copiar "),e.qZA(),e.TgZ(83,"ion-button",14),e._uU(84," Pagar"),e.qZA()()()()()()()()),2&i&&(e.xp6(8),e.Q6J("formGroup",r.myForm),e.xp6(32),e.Oqu(r.salida),e.xp6(7),e.Oqu(r.destino),e.xp6(8),e.HOy("\xa0",e.xi3(56,12,r.diaHora,"dd")," de ",e.xi3(57,15,r.diaHora,"MMM")," de ",e.xi3(58,18,r.diaHora,"yyyy")," - ",e.xi3(59,21,r.diaHora,"HH:mm"),"hs."),e.xp6(9),e.hij(" ",r.totalfinal,"\xa0USD"),e.xp6(6),e.s9C("max",r.cantidadAsientosq),e.Q6J("ngModel",r.myForm.value.asientos)("value",1),e.xp6(7),e.hij("$ ",r.totalfinalReserva*r.dolar,""))},directives:[l.Gu,l.sr,l.wd,l.Sm,l.YG,l.W2,U._Y,U.JL,U.sg,l.PM,l.Zi,l.Dq,l.tO,l.gu,l.FN,l.jY,l.Nd,l.wI,l.pK,l.as,U.JJ,U.u,U.Q7],pipes:[re.uU],styles:[""]}),o})()}}]);