"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2822],{7574:(C,m,a)=>{a.d(m,{o:()=>e});var _=a(520),h=a(2096),f=a(849),d=a(5649);let e=(()=>{class s{constructor(g,l,p){this.storage=g,this.navCtrl=l,this.httpClient=p}verificar(){this.storage.get("datos_piloto").then(g=>{if(!g)return console.log("Login","Inactivo"),this.navCtrl.navigateRoot("/login")})}getUser(){return new Promise((g,l)=>{this.storage.get("datos_piloto").then(p=>{g(p)},p=>{l(p.json()),console.log("error",p.json)})})}getDolarBlue(){return this.httpClient.get("https://api.bluelytics.com.ar/v2/latest")}getLugares(){const g=new _.WM({"Content-Type":"application/octet-stream"});return this.httpClient.post("https://www.libreviaje.com/admin/index.php/Api5/getLugares/",JSON.stringify({}),g)}getAviones(){const g=new _.WM({"Content-Type":"application/octet-stream"});return this.httpClient.post("https://www.libreviaje.com/admin/index.php/Api5/getAviones/",JSON.stringify({}),g)}}return s.\u0275fac=function(g){return new(g||s)(h.LFG(f.K),h.LFG(d.SH),h.LFG(_.eN))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},2822:(C,m,a)=>{a.d(m,{J:()=>r});var _=a(655),h=a(520),f=a(9825),d=a(4182),e=a(2096),s=a(5649),O=a(7574),g=a(9808);function l(n,o){if(1&n&&(e.TgZ(0,"ion-row",12)(1,"ion-col")(2,"div",13),e._UZ(3,"img",14),e.TgZ(4,"div",15)(5,"div",16)(6,"h4"),e._uU(7),e.qZA(),e.TgZ(8,"h5"),e._UZ(9,"ion-icon",17),e._uU(10),e.ALo(11,"date"),e.ALo(12,"date"),e.qZA()(),e._UZ(13,"hr"),e.TgZ(14,"div",18),e._uU(15),e.qZA()(),e._UZ(16,"br"),e.qZA()()()),2&n){const t=e.oxw().$implicit;e.xp6(3),e.MGl("src","https://libreviaje.com/images/",t.FOTO_PILOTO,"",e.LSH),e.xp6(4),e.hij(" ",t.PILOTO,""),e.xp6(3),e.AsE(" ",e.xi3(11,5,t.FECHA_HORA,"dd/MM/yyyy")," - ",e.xi3(12,8,t.FECHA_HORA,"HH:mm")," "),e.xp6(5),e.hij(" ",t.MENSAJE,"")}}function p(n,o){if(1&n&&(e.TgZ(0,"ion-row",19)(1,"ion-col")(2,"div",20),e._UZ(3,"img",14),e.TgZ(4,"div",15)(5,"div",21)(6,"div",16)(7,"h4"),e._uU(8),e.qZA(),e.TgZ(9,"h5"),e._UZ(10,"ion-icon",17),e._uU(11),e.ALo(12,"date"),e.ALo(13,"date"),e.qZA()(),e._UZ(14,"hr"),e.TgZ(15,"div",18),e._uU(16),e.qZA()()(),e._UZ(17,"br"),e.qZA()()()),2&n){const t=e.oxw().$implicit;e.xp6(3),e.MGl("src","https://libreviaje.com/images/",t.FOTO_PASAJERO,"",e.LSH),e.xp6(5),e.hij(" ",t.PASAJERO,""),e.xp6(3),e.AsE(" ",e.xi3(12,5,t.FECHA_HORA,"dd/MM/yyyy")," - ",e.xi3(13,8,t.FECHA_HORA,"HH:mm")," "),e.xp6(5),e.hij(" ",t.MENSAJE,"")}}function u(n,o){if(1&n&&(e.TgZ(0,"ion-grid"),e.YNc(1,l,17,11,"ion-row",10),e.YNc(2,p,18,11,"ion-row",11),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf","PILOTO"===t.TIPO_USUARIO),e.xp6(1),e.Q6J("ngIf","PASAJERO"===t.TIPO_USUARIO)}}function P(n,o){if(1&n&&(e.TgZ(0,"ion-content")(1,"ion-grid",7)(2,"form",8)(3,"ion-row"),e._UZ(4,"ion-col")(5,"ion-col"),e.qZA()()(),e.YNc(6,u,3,2,"ion-grid",9),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.myForm),e.xp6(4),e.Q6J("ngForOf",t.chats)}}let r=(()=>{class n{constructor(t,i,c,M,b){this.http=t,this.navParams=i,this.modalCtrl=c,this.inicia=M,this.formBuilder=b,this.isModalOpen=!1,this.myForm=this.formBuilder.group({asientos:["1",d.kI.required],totales:[""]}),this.nomostrar=!0,this.myForm=this.formBuilder.group({mensaje:["",d.kI.required]})}cancel(){return this.modalCtrl.dismiss(null,"cancel")}ngOnInit(){this.getChatReservas(),(0,f.F)(15e3).subscribe(()=>{this.getChatReservas()})}enviaMensaje(){return(0,_.mG)(this,void 0,void 0,function*(){const t=new h.WM({"Content-Type":"application/octet-stream"});this.idPILOTOS_RESERVAS=this.navParams.get("mySubject"),this.idPILOTOS=this.navParams.get("mySubject2"),this.idUSUARIO=this.navParams.get("mySubject3"),this.EMAIL_PASAJERO=this.navParams.get("mySubject4"),this.NOMBRE_PILOTO=this.navParams.get("mySubject5"),this.http.post("https://www.libreviaje.com/admin/index.php/Api5/addMensajeChat/",JSON.stringify({idUSUARIO:this.idUSUARIO,MENSAJE:this.mensaje,TIPO_USUARIO:"PILOTO",idPILOTOS_RESERVAS:this.idPILOTOS_RESERVAS,idPILOTOS:this.idPILOTOS,EMAIL_PASAJERO:this.EMAIL_PASAJERO,NOMBRE_PILOTO:this.NOMBRE_PILOTO}),t).subscribe(c=>{this.myForm=this.formBuilder.group({mensaje:["",d.kI.required]}),this.mensaje="",this.getChatReservas()},c=>{this.nomostrar=!1,console.log(c)})})}getChatReservas(){this.nomostrar=!1;const t=new h.WM({"Content-Type":"application/octet-stream"});this.idPILOTOS_RESERVAS=this.navParams.get("mySubject"),this.http.post("https://www.libreviaje.com/admin/index.php/Api5/getChatReservas/",JSON.stringify({idPILOTOS_RESERVAS:this.idPILOTOS_RESERVAS}),t).subscribe(c=>{this.chats=c,this.nomostrar=!0},c=>{this.nomostrar=!1,console.log(c)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.eN),e.Y36(s.X1),e.Y36(s.IN),e.Y36(O.o),e.Y36(d.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chat"]],decls:11,vars:2,consts:[["type","text","placeholder","Enviar mensaje",1,"bordeMensajero",3,"ngModel","ngModelChange"],["slot","end"],[3,"click"],["name","send"],["name","reload"],["name","close"],[4,"ngIf"],[1,"ion-align-items-center"],["novalidate","",3,"formGroup"],[4,"ngFor","ngForOf"],["class","container",4,"ngIf"],["class","container darker",4,"ngIf"],[1,"container"],[1,"message","info"],["alt","",1,"img-circle","medium-image",3,"src"],[1,"message-body"],[1,"message-info"],["name","time",1,"fa","fa-clock-o"],[1,"message-text"],[1,"container","darker"],[1,"message","my-message"],[1,"message-body-inner"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-input",0),e.NdJ("ngModelChange",function(M){return i.mensaje=M}),e.qZA(),e.TgZ(3,"ion-buttons",1)(4,"ion-button",2),e.NdJ("click",function(){return i.enviaMensaje()}),e._UZ(5,"ion-icon",3),e.qZA(),e.TgZ(6,"ion-button",2),e.NdJ("click",function(){return i.getChatReservas()}),e._UZ(7,"ion-icon",4),e.qZA(),e.TgZ(8,"ion-button",2),e.NdJ("click",function(){return i.cancel()}),e._UZ(9,"ion-icon",5),e.qZA()()()(),e.YNc(10,P,7,2,"ion-content",6)),2&t&&(e.xp6(2),e.Q6J("ngModel",i.mensaje),e.xp6(8),e.Q6J("ngIf",i.nomostrar))},directives:[s.Gu,s.sr,s.pK,s.j9,d.JJ,d.On,s.Sm,s.YG,s.gu,g.O5,s.W2,s.jY,d._Y,d.JL,d.sg,s.Nd,s.wI,g.sg],pipes:[g.uU],styles:['body[_ngcontent-%COMP%]{margin-top:20px;background:#eee}.info-combo[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{margin:3px 0}.no-margin-bottom[_ngcontent-%COMP%]{margin-bottom:0!important}.info-combo[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%]{margin:2px 0 6px}.medium-image[_ngcontent-%COMP%]{width:45px;height:45px;margin-right:5px}.img-circle[_ngcontent-%COMP%]{border-radius:50%}.messages-panel[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 150px);min-height:460px;background-color:#fbfcff;display:inline-block;border-top-left-radius:5px;margin-bottom:0}.messages-panel[_ngcontent-%COMP%]   img.img-circle[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1)}.messages-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{border:none;background-color:transparent}.contacts-list[_ngcontent-%COMP%]{background-color:#fff;border-right:1px solid #cfdbe2;width:305px;height:100%;border-top-left-radius:5px;float:left}.message-body[_ngcontent-%COMP%]{background-color:#fbfcff;height:100%;width:calc(100% - 305px);float:right}.message-body[_ngcontent-%COMP%]   .message-top[_ngcontent-%COMP%]{display:inline-block;width:100%;position:relative;min-height:53px;height:auto;background-color:#fff;border-bottom:1px solid rgba(205,211,237,.5)}.message-body[_ngcontent-%COMP%]   .message-top[_ngcontent-%COMP%]   .new-message-wrapper[_ngcontent-%COMP%]{width:100%}.bordeMensajero[_ngcontent-%COMP%]{margin-left:5px;padding-left:10px;border-color:#eee;border-width:1px;box-sizing:border-box;border-style:solid}ion-input.bordeMensajero[_ngcontent-%COMP%]{--background: #fff;--color: #2c0e4c;--placeholder-color: #ddd;--placeholder-opacity: .8;--padding-bottom: 10px;--padding-end: 10px;--padding-start: 10px;--padding-top: 10px}.message-body[_ngcontent-%COMP%]   .message-top[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{height:53px;line-height:53px;padding:0 20px;float:right;border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;margin:0;font-size:15px;opacity:.9}.message-body[_ngcontent-%COMP%]   .message-top[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]:hover, .message-body[_ngcontent-%COMP%]   .message-top[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]:focus, .message-body[_ngcontent-%COMP%]   .message-top[_ngcontent-%COMP%] > .btn.active[_ngcontent-%COMP%]{opacity:1}.message-body[_ngcontent-%COMP%]   .message-top[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{margin-right:5px;font-size:18px}.new-message-wrapper[_ngcontent-%COMP%]{position:absolute;max-height:400px;top:53px;background-color:#fff;z-index:105;padding:20px 15px 30px;border-bottom:1px solid #cfdbe2;border-bottom-left-radius:3px;border-bottom-right-radius:3px;box-shadow:0 7px 10px #00000040;transition:.5s;display:none}.new-message-wrapper.closed[_ngcontent-%COMP%]{opacity:0;max-height:0}.chat-footer.new-message-textarea[_ngcontent-%COMP%]{display:block;position:relative;padding:0 10px}.chat-footer.new-message-textarea[_ngcontent-%COMP%]   .send-message-button[_ngcontent-%COMP%]{right:35px}.chat-footer.new-message-textarea[_ngcontent-%COMP%]   .upload-file[_ngcontent-%COMP%]{right:85px}.chat-footer.new-message-textarea[_ngcontent-%COMP%]   .send-message-text[_ngcontent-%COMP%]{padding-right:100px;height:90px}.message-chat[_ngcontent-%COMP%]{width:100%;overflow:hidden}.chat-body[_ngcontent-%COMP%]{width:calc(100% + 17px);min-height:290px;height:calc(100vh - 320px);background-color:#fbfcff;margin-bottom:30px;padding:30px 5px 5px;overflow-y:scroll}.message[_ngcontent-%COMP%]{position:relative;width:100%}.message[_ngcontent-%COMP%]   br[_ngcontent-%COMP%]{clear:both}.message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]{position:relative;width:auto;max-width:calc(100% - 150px);float:left;background-color:#fff;border-radius:4px;border:1px solid #dbe3e8;margin:0 5px 20px 15px;color:#788288}.message[_ngcontent-%COMP%]:after{content:"";position:absolute;top:11px;left:63px;float:left;z-index:100;border-top:10px solid transparent;border-left:none;border-bottom:10px solid transparent;border-right:13px solid #fff}.message[_ngcontent-%COMP%]:before{content:"";position:absolute;top:10px;left:62px;float:left;z-index:99;border-top:11px solid transparent;border-left:none;border-bottom:11px solid transparent;border-right:13px solid #dbe3e8}.message[_ngcontent-%COMP%]   .medium-image[_ngcontent-%COMP%]{float:left;margin-left:10px}.message[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%]{width:100%;height:22px}.message[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{font-size:11px;font-weight:700;margin:0 2px 0 0;color:#a2b8c5}.message[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%]{color:#a2b8c5;margin:8px 0 0;font-size:12px;float:right;padding-right:10px}.message[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin:7px 13px 0 10px;color:#65addd;float:left}.message[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:4px 2%;width:96%;opacity:.75}.message[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{text-align:left;padding:3px 13px 10px;font-size:14px}.message.my-message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]{float:right;margin:0 15px 20px 5px}.message.my-message[_ngcontent-%COMP%]:after{content:"";position:absolute;top:11px;left:auto;right:63px;float:left;z-index:100;border-top:10px solid transparent;border-left:13px solid #fff;border-bottom:10px solid transparent;border-right:none}.message.my-message[_ngcontent-%COMP%]:before{content:"";position:absolute;top:10px;left:auto;right:62px;float:left;z-index:99;border-top:11px solid transparent;border-left:13px solid #dbe3e8;border-bottom:11px solid transparent;border-right:none}.message.my-message[_ngcontent-%COMP%]   .medium-image[_ngcontent-%COMP%]{float:right;margin-left:5px;margin-right:10px}.message.my-message[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%]{float:left;padding-left:10px;padding-right:0}.message.my-message[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{float:right}.message.info[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]{background-color:#2da9e9;border:1px solid #2da9e9;color:#fff}.message.info[_ngcontent-%COMP%]:after, .message.info[_ngcontent-%COMP%]:before{border-right:13px solid #2da9e9}.message.success[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]{background-color:#0ec8a2;border:1px solid #0ec8a2;color:#fff}.message.success[_ngcontent-%COMP%]:after, .message.success[_ngcontent-%COMP%]:before{border-right:13px solid #0ec8a2}.message.warning[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]{background-color:#ff9e2a;border:1px solid #ff9e2a;color:#fff}.message.warning[_ngcontent-%COMP%]:after, .message.warning[_ngcontent-%COMP%]:before{border-right:13px solid #ff9e2a}.message.danger[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]{background-color:#f95858;border:1px solid #f95858;color:#fff}.message.danger[_ngcontent-%COMP%]:after, .message.danger[_ngcontent-%COMP%]:before{border-right:13px solid #f95858}.message.dark[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]{background-color:#314557;border:1px solid #314557;color:#fff}.message.dark[_ngcontent-%COMP%]:after, .message.dark[_ngcontent-%COMP%]:before{border-right:13px solid #314557}.message.info[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%], .message.success[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%], .message.warning[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%], .message.danger[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%], .message.dark[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{color:#fff}.message.info[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%], .message.info[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%] > i[_ngcontent-%COMP%], .message.success[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%], .message.success[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%] > i[_ngcontent-%COMP%], .message.warning[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%], .message.warning[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%] > i[_ngcontent-%COMP%], .message.danger[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%], .message.danger[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%] > i[_ngcontent-%COMP%], .message.dark[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%], .message.dark[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{color:#fff;opacity:.9}.chat-footer[_ngcontent-%COMP%]{position:relative;padding:0 80px}.chat-footer[_ngcontent-%COMP%]   .send-message-text[_ngcontent-%COMP%]{position:relative;display:block;background-color:#fff;border-radius:5px;padding:5px 95px 5px 10px;font-size:13px;resize:vertical;outline:none;border:1px solid #e0e6eb}.chat-footer[_ngcontent-%COMP%]   .send-message-button[_ngcontent-%COMP%]{display:block;margin:auto;border:1px solid rgba(0,0,0,.05);outline:none;font-weight:600;border-radius:50%;padding:0}.chat-footer[_ngcontent-%COMP%]   .send-message-button[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{font-size:16px;margin:0 0 0 -2px}.profile-main[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #dce2e9;border-radius:3px;position:relative;margin-bottom:20px}']}),n})()},9825:(C,m,a)=>{a.d(m,{F:()=>u});var _=a(2916),h=a(2654);class f extends h.w{constructor(n,o){super()}schedule(n,o=0){return this}}let e=(()=>{class r{constructor(o,t=r.now){this.SchedulerAction=o,this.now=t}schedule(o,t=0,i){return new this.SchedulerAction(this,o).schedule(i,t)}}return r.now=()=>Date.now(),r})();class s extends e{constructor(n,o=e.now){super(n,()=>s.delegate&&s.delegate!==this?s.delegate.now():o()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(n,o=0,t){return s.delegate&&s.delegate!==this?s.delegate.schedule(n,o,t):super.schedule(n,o,t)}flush(n){const{actions:o}=this;if(this.active)return void o.push(n);let t;this.active=!0;do{if(t=n.execute(n.state,n.delay))break}while(n=o.shift());if(this.active=!1,t){for(;n=o.shift();)n.unsubscribe();throw t}}}const g=new s(class d extends f{constructor(n,o){super(n,o),this.scheduler=n,this.work=o,this.pending=!1}schedule(n,o=0){if(this.closed)return this;this.state=n;const t=this.id,i=this.scheduler;return null!=t&&(this.id=this.recycleAsyncId(i,t,o)),this.pending=!0,this.delay=o,this.id=this.id||this.requestAsyncId(i,this.id,o),this}requestAsyncId(n,o,t=0){return setInterval(n.flush.bind(n,this),t)}recycleAsyncId(n,o,t=0){if(null!==t&&this.delay===t&&!1===this.pending)return o;clearInterval(o)}execute(n,o){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const t=this._execute(n,o);if(t)return t;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,o){let i,t=!1;try{this.work(n)}catch(c){t=!0,i=!!c&&c||new Error(c)}if(t)return this.unsubscribe(),i}_unsubscribe(){const n=this.id,o=this.scheduler,t=o.actions,i=t.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&t.splice(i,1),null!=n&&(this.id=this.recycleAsyncId(o,n,null)),this.delay=null}});var l=a(6688);function u(r=0,n=g){return(!function p(r){return!(0,l.k)(r)&&r-parseFloat(r)+1>=0}(r)||r<0)&&(r=0),(!n||"function"!=typeof n.schedule)&&(n=g),new _.y(o=>(o.add(n.schedule(P,r,{subscriber:o,counter:0,period:r})),o))}function P(r){const{subscriber:n,counter:o,period:t}=r;n.next(o),this.schedule({subscriber:n,counter:o+1,period:t},t)}}}]);